<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700,800&display=swap&subset=cyrillic" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Raleway:400,800&display=swap" rel="stylesheet">
    <link rel="canonical" href="https://yurka1605.github.io/block/index.html"/>
    <title>Block</title>
</head>
<body>
    <main>
        <header>
            <div class="header-nav">
                <ul>
                    <li>
                        <span class="header-nav__span">24/7</span>
                        Юристы&nbsp;<span class="header-nav__span_green">доступны</span>
                    </li>
                    <li>
                        <span class="header-nav__span">9.8/10</span>
                        Рейтинг &nbsp;<a class="header-nav__link" href="#">по отзывам</a>
                    </li>
                    <li>
                        <img src="img/TV.png" alt="TV">
                        <a class="header-nav__link" href="#">Мы в СМИ</a>
                    </li>
                    <li>
                        <img src="img/video-camera.png" alt="videoblog">
                        <a class="header-nav__link" href="#">Видеоблог</a>
                    </li>
                </ul>
                <ul>
                    <li>
                        <img src="img/address.png" alt="Address">
                        <a class="header-nav__link" href="#">Офисы в СПб и ЛО</a>
                    </li>
                    <li><a class="header-nav__link_tel" href="tel:88005006696">8 (800) 500-66-96</a></li>
                    <li><a class="header-nav__link_tel" href="tel:88128482361">8 (812) 848-23-61</a></li>
                </ul>
            </div>
            <div class="header custom-container">
                <div class="logo">
                    <a href="#"><img class="logo__img" src="img/logo.svg" alt="logo"></a>
                    <div class="logo__text">
                        <span class="logo__text_head">Высшая Инстанция</span>
                        <span class="logo__text_body">Специализированный юридический консорциум №1</span>
                    </div>
                </div>
                <div class="ctx-menu">
                    <ul>
                        <li><a href="#">Специализация</a></li>
                        <li><a href="#">Услуги</a></li>
                        <li><a href="#">Блог</a></li>
                        <li><a href="#">Контакты</a></li>
                    </ul>
                    <a href="tel:88128482361"><img src="img/call-mobile.png" alt="Call"></a>
                </div>
                <div class="menu-btn">
                    Меню
                    <span>
                        <i></i>
                    </span>
                </div>
            </div>
        </header>
        <div class="main-section">
            <div class="communication custom-container">
                <div class="buyout">
                    <div class="buyout__head">
                        Эффективная помощь юриста
                        с опытом по вашему вопросу
                    </div>
                    <div class="buyout__price">
                        Опытные юристы круглосуточно готовы встать на вашу защиту.
                        Помогаем справится с проблемами 30 направлениях.
                    </div>
                    <div class="buyout__label">
                        <span class="buyout__label_place">2 место</span>
                        <span class="buyout__label_pravo">
                            по рейтингу юридических фирм
                            в России 2017 года <a href="https://pravo.ru" target="_blanck">pravo.ru</a>
                        </span>
                    </div>
                    <div class="buyout__form">
                        <form action="#" method="post">
                            <div class="buyout__form_badge">
                                <div class="buyout__form_badge-in">
                                    5<span>на текущий момент<br>осталось<br>мест
                                </div>
                            </div>
                            <div class="buyout__form_top">
                                Консультация бесплатно <span>5000<sup> руб.</sup></span>
                            </div>
                            <div class="buyout__form_head">
                                <!-- <div class="buyout__form_time">
                                    <span>Сейчас</span>
                                    <a href="#">На время</a>
                                </div> -->
                                <div class="buyout__form_checkbox">
                                    <input required type="checkbox" name="check" id="check" checked>
                                    <label for="check">Я согласен на обработку персональных данных<span>Согласен с политикой</span></label>
                                </div>
                            </div>
                            <div class="buyout__form-enter">
                                <input type="tel" name="tel" id="tel1" maxlength="18" placeholder="(930) 128-00-48" pattern="\s?[\(]{0,1}9[0-9]{2}[\)]{0,1}\s?\d{3}[-]{0,1}\d{2}[-]{0,1}\d{2}" required>
                                <button type="submit">Получить консультацию</button>
                            </div>
                            <div class="buyout__form_checkbox1">
                                <label>Юристу по банковским вопросам (Спб, ЛО)</label>
                                <label>Понедельник - суббота с 9:30 до 23:00</label>
                            </div>
                            <div class="buyout__form_bottom">
                                или получите контакты
                                <a href="#">по СМС</a>
                                <span>NEW</span>
                            </div>
                        </form>
                    </div>
                </div>
                <div class="watch-video">
                    <div class="watch-video__clip">
                        <div class="watch-video__play">
                            <a class="watch-video__play-link" href="#">
                                <span class="watch-video__play-triangle"></span>
                            </a>
                            <div class="watch-video__play-label">
                                <p class="watch-video__play-label_text-top">Узнайте,</p> 
                                как правильно выбрать</br>
                                юридическую фирму
                                <p class="watch-video__play-label_text-bottom">за одну минуту</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal-backgroup"></div>
        <div class="modal-wrap">
            <div class="modal-window">
                <div class="modal-close">×</div>
                <div class="modal-body">
                    <div class="modal-body__form">
                        <div class="modal__form">
                            <h3>
                                Часто, телефоны случайно оставляют клиенты,
                                не заинтересованные в юридической консультации
                            </h3>
                            <br>
                            <p>
                                Введите свой е-мэил, в целях подтверждение, вашего желания получить бесплатную
                                консультацию от профильного юриста по вашему вопросу
                            </p>
                            <br>
                            <form action="#" method="post">
                                <div class="modal__form-enter">
                                    <input type="email" name="email" id="email" placeholder="example@email.com" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2, 3}$" required>
                                    <button type="submit">Подтвердить</button>
                                </div>
                                <div class="modal__form_checkbox">
                                    <input required type="checkbox" id="modalCheck">
                                    <label for="modalCheck">Я согласен с политикой конфиденциальностии даю согласие на обработку моих&nbsp;<a href="#">персональных данных</a></label>
                                </div>
                            </form>
                        </div>
                    </div>
                    <div class="modal-body__thanks">
                        <div class="modal-body__thanks_checkbox">&#10004;</div>
                        <div class="modal-body__thanks_text">
                            <h3>Спасибо за заявку!</h3>
                            <p>В ближайшее время наш специалист свяжется с вами.</p>
                        </div>
                    </div>
                    <div class="modal-body__video"></div>
                </div>
            </div>
        </div>
    </main>
    <script>
    window.onload = function() {
        const urlVideo = 'https://www.youtube.com/embed/nRhWUhDeYWY';

        const linkBlack = document.querySelector('.buyout__head_link-black');
        const linkBlue = document.querySelector('.buyout__head_link-blue');
        const videoShowButton = document.querySelector('.watch-video__play-link ');
        const form1 = document.querySelector('.buyout__form-enter button');
        const form2 = document.querySelector('.buyout__form-enter1 button');
        const formModal = document.querySelector('.modal__form-enter button');

        const modalBackgroup = document.querySelector('.modal-backgroup');
        const modalWrap = document.querySelector('.modal-wrap');
        const modalWindow = document.querySelector('.modal-window');
        const modalClose = document.querySelector('.modal-close');
        const modalBodyHome = document.querySelector('.modal-body__home');
        const modalBodyProblem = document.querySelector('.modal-body__problem');
        const modalBodyForm = document.querySelector('.modal-body__form');
        const modalThanks = document.querySelector('.modal-body__thanks');
        const modalVideo = document.querySelector('.modal-body__video');
        const tel1 = document.querySelector('#tel1');
        const tel2 = document.querySelector('#tel2');
        const email = document.querySelector('#email');
        const check1 = document.querySelector('#check');
        const check2 = document.querySelector('#check1');
        const check3 = document.querySelector('#modalCheck');
        const bodys = document.querySelector('body');

        formModal.addEventListener('click', function () {
            if (!validMail(email) || !check3.checked) return;
            openModal(event);
            modalThanks.classList.add('active');
            modalBodyForm.classList.remove('active');
            email.value = '';
            check3.checked = false;
        });

        tel1.addEventListener('input', function () {
            setTimeout(() => {
                this.value = validReackTel(this.value);
            }, 200);
        });

        // tel2.addEventListener('input', function () {
        //     setTimeout(() => {
        //         this.value = validReackTel(this.value);
        //     }, 200);
        // });

        function validReackTel(currentValue) {
            currentValue = currentValue.trim();
            const re = /[A-Za-zА-Яа-я]/g;
            const validVal = currentValue.replace(re, "");
            return validVal;
        }

        form1.addEventListener('click', function () {
            const re = /\s?[\(]{0,1}9[0-9]{2}[\)]{0,1}\s?\d{3}[-]{0,1}\d{2}[-]{0,1}\d{2}/;
            if (!validPhone(tel1, re) || !check1.checked) return;
            openModal(event);
            modalBodyForm.classList.add('active');
            check1.checked = false;
            tel1.value = ''; 
        });

        videoShowButton.addEventListener('click', function () {
            openModal(event);
            modalVideo.innerHTML = '<iframe ' +
            'frameborder="0" allow="accelerometer; autoplay; ' +
            'encrypted-media; gyroscope; picture-in-picture"' +
            'allowfullscreen></iframe>';
            modalVideo.children[0].src = urlVideo;
            modalVideo.classList.add('active');
            modalWindow.classList.add('p-0');
        });

        modalWrap.addEventListener('click', function () {
            event.preventDefault();
            closeAll();
        });

        modalWindow.addEventListener('click', function (e) {
            e.stopPropagation();
        });

        modalClose.addEventListener('click', function () {
            event.preventDefault();
            closeAll();
        });

        function closeAll() {
            modalWindow.classList.remove('link');
            modalBackgroup.classList.remove('active');
            modalWrap.classList.remove('active');
            modalBodyHome.classList.remove('active');
            modalBodyProblem.classList.remove('active');
            modalThanks.classList.remove('active');
            modalBodyForm.classList.remove('active');
            email.value = '';
            bodys.classList.remove('overflow-hidden');
            modalVideo.classList.remove('active');
            modalVideo.innerHTML = '';
            modalWindow.classList.remove('p-0');
        }

        function openModal (event) {
            event.preventDefault();
            modalBackgroup.classList.add('active');
            modalWrap.classList.add('active');
            bodys.classList.add('overflow-hidden');
        }

        function validMail(el) {
            var re = /^[\w-\.]+@[\w-]+\.[a-z]{2,4}$/i;
            var myMail = el.value;
            var valid = re.test(myMail);
            return valid;
        }
        
        function validPhone(el,re) {
            var myPhone = el.value;
            var valid = re.test(myPhone);
            return valid;
        } 
                    
    } 
    </script>
</body>
</html>